<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hand Gesture Recognition System</title>
  <style>
    /* (your CSS ‚Äî unchanged from the version you posted) */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
           background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
           min-height:100vh; color:white; }
    .container{max-width:1200px;margin:0 auto;padding:20px}
    .header{text-align:center;margin-bottom:30px;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);
            padding:30px;border-radius:20px;border:1px solid rgba(255,255,255,0.2)}
    .header h1{font-size:2.5em;margin-bottom:10px;
               background: linear-gradient(45deg,#ff6b6b,#4ecdc4);
               -webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .header p{font-size:1.2em;opacity:0.9}
    .main-content{display:grid;grid-template-columns:1fr 300px;gap:30px;align-items:start}
    .video-section{background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);padding:20px;border-radius:20px;
                   border:1px solid rgba(255,255,255,0.2);text-align:center}
    .video-container{position:relative;display:inline-block;border-radius:15px;overflow:hidden;
                     box-shadow:0 20px 40px rgba(0,0,0,0.3)}
    #video-feed{max-width:100%;height:auto;display:block}
    .controls{margin-top:20px;display:flex;gap:15px;justify-content:center;flex-wrap:wrap}
    .btn{padding:12px 24px;border:none;border-radius:25px;font-size:16px;font-weight:600;cursor:pointer;
         transition:all 0.3s ease;text-transform:uppercase;letter-spacing:1px}
    .btn-primary{background:linear-gradient(45deg,#4CAF50,#45a049);color:white}
    .btn-secondary{background:linear-gradient(45deg,#f44336,#da190b);color:white}
    .btn:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(0,0,0,0.3)}
    .status-panel{background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);padding:20px;border-radius:20px;
                  border:1px solid rgba(255,255,255,0.2);height:fit-content}
    .status-panel h3{margin-bottom:20px;text-align:center;font-size:1.5em}
    .prediction-display{background:rgba(255,255,255,0.2);padding:20px;border-radius:15px;text-align:center;margin-bottom:20px;
                        min-height:80px;display:flex;align-items:center;justify-content:center;border:2px solid rgba(255,255,255,0.3)}
    .prediction-text{font-size:1.8em;font-weight:bold;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}
    .gesture-list{margin-top:20px}
    .gesture-list h4{margin-bottom:15px;color:#4ecdc4}
    .gesture-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.9em}
    .gesture-item{padding:8px 12px;background:rgba(255,255,255,0.1);border-radius:8px;text-align:center;transition:all 0.3s ease}
    .gesture-item:hover{background:rgba(255,255,255,0.2);transform:scale(1.05)}
    .status-indicator{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:8px}
    .status-active{background:#4CAF50;animation:pulse 1.5s ease-in-out infinite alternate}
    .status-inactive{background:#f44336}
    @keyframes pulse{from{opacity:1}to{opacity:0.4}}
    .info-section{grid-column:1 / -1;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);padding:20px;border-radius:20px;
                  border:1px solid rgba(255,255,255,0.2);margin-top:30px}
    .info-section h3{margin-bottom:15px;color:#4ecdc4}
    .info-section p{line-height:1.6;opacity:0.9}
    @media (max-width:768px){.main-content{grid-template-columns:1fr}.header h1{font-size:2em}
    .controls{flex-direction:column;align-items:center}.btn{width:200px}}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ü§ü Hand Gesture Recognition</h1>
      <p>Real-time AI-powered hand gesture detection and classification</p>
    </div>

    <div class="main-content">
      <div class="video-section">
        <div class="video-container">
          <!-- direct MJPEG stream URL (served by Flask) -->
          <img id="video-feed" src="/video_feed" alt="Video Feed">
        </div>

        <div class="controls">
          <button class="btn btn-primary" onclick="startRecognition()">‚ñ∂Ô∏è Start Recognition</button>
          <button class="btn btn-secondary" onclick="stopRecognition()">‚èπÔ∏è Stop Recognition</button>
        </div>
      </div>

      <div class="status-panel">
        <h3>üéØ Current Prediction</h3>
        <div class="prediction-display">
          <div class="prediction-text" id="prediction-text">No hand detected</div>
        </div>

        <div style="text-align:center;margin-bottom:20px;">
          <span class="status-indicator status-active" id="status-indicator"></span>
          <span id="status-text">Active</span>
        </div>

        <div class="gesture-list">
          <h4>üìã Supported Gestures</h4>
          <div class="gesture-grid">
            <div class="gesture-item">A - J Letters</div>
            <div class="gesture-item">üëç Thumbs Up</div>
            <div class="gesture-item">üëé Thumbs Down</div>
            <div class="gesture-item">‚ù§Ô∏è I Love You</div>
            <div class="gesture-item">üçÄ Good Luck</div>
            <div class="gesture-item">‚úã Stop</div>
          </div>
        </div>
      </div>
    </div>

    <div class="info-section">
      <h3>‚ÑπÔ∏è How to Use</h3>
      <p>
        <strong>1.</strong> Make sure your camera is connected and working.<br>
        <strong>2.</strong> Position your hand in front of the camera.<br>
        <strong>3.</strong> The system will automatically detect and classify your hand gestures.<br>
        <strong>4.</strong> Try different gestures from the supported list above.<br>
        <strong>5.</strong> For best results, ensure good lighting and clear hand visibility.
      </p>
    </div>
  </div>

  <script>
    let isRecognitionActive = true;

    // Poll /prediction every 500ms for the current label
    async function updatePrediction() {
      if (!isRecognitionActive) return;
      try {
        const res = await fetch('/prediction', {cache: 'no-store'});
        const data = await res.json();
        document.getElementById('prediction-text').textContent = data.prediction;
      } catch (err) {
        console.error('Error fetching prediction:', err);
        document.getElementById('prediction-text').textContent = 'Connection error';
      }
    }

    function startRecognition() {
      fetch('/start', { method: 'POST' })
        .then(r => r.json())
        .then(d => { isRecognitionActive = true; updateStatusIndicator(true); })
        .catch(e => console.error(e));
    }

    function stopRecognition() {
      fetch('/stop', { method: 'POST' })
        .then(r => r.json())
        .then(d => { isRecognitionActive = false; updateStatusIndicator(false); document.getElementById('prediction-text').textContent = 'Recognition stopped'; })
        .catch(e => console.error(e));
    }

    function updateStatusIndicator(active) {
      const indicator = document.getElementById('status-indicator');
      const statusText = document.getElementById('status-text');
      if (active) { indicator.className = 'status-indicator status-active'; statusText.textContent = 'Active'; }
      else { indicator.className = 'status-indicator status-inactive'; statusText.textContent = 'Inactive'; }
    }

    // start polling
    setInterval(updatePrediction, 500);

    document.addEventListener('visibilitychange', () => {
      if (document.hidden) isRecognitionActive = false;
      else isRecognitionActive = true;
    });

    // handle video feed error
    document.getElementById('video-feed').addEventListener('error', function() {
      console.error('Video feed error');
      this.alt = 'Video feed unavailable - Check camera connection';
    });
  </script>
</body>
</html>
